<!DOCTYPE html>
<html lang="en">
<head>
	<meta charset="UTF-8" />
	<title>用户中心</title>
	<meta name="viewport" content="width=device-width,initial-scale=1,minimum-scale=1,maximum-scale=1,user-scalable=no" />
	<link rel="stylesheet" href="css/mui.min.css"/>
	<link rel="stylesheet" href="css/mui-icons-extra.css"/>
	<link rel="stylesheet" href="css/app.css" />
	<link rel="stylesheet" href="css/user.css" />
	<script type="text/javascript" src="js/jquery.min.js"></script>
	<script type="text/javascript" src="js/mui.min.js"></script>
	<script type="text/javascript" src="js/lib/artTemplate.js"></script>
	<script type="text/javascript" src="js/lib/common.js"></script>
	<script type="text/javascript" src="js/common.js"></script>

</head>
<body>
	<!-- 主界面不动、菜单移动 -->
	<!-- 侧滑导航根容器 -->
	
	  <!-- 主页面容器 -->
	  <div class="mui-content mui-scroll-wrapper" id="pullrefresh">
		<!-- 主页面标题 --> 
		<header class="header">
			<div class="mui-bar mui-bar-nav" style="box-shadow: none;background: #2695EF;">
				<div class="fa fa-gear" id="setting"></div>
				<h1 class="mui-title"  style="right: 80px;left: 80px;">我的</h1>
				<div class="fa fa-more" style="float: right;font-size: 32px;" id="invite"></div>
			</div>
		</header>
		<div class="mui-scroll" style="margin-bottom: 50px;">
		  <div>
			<!-- 主界面具体展示内容 -->
			<div class="mui-content-main first-main" style="margin-top: -120px;">
				<div class="useravter" style="background: url(picture/yqm.png);background-size:100% 100%;">
				</div>
				<div class="username">
					<span>通无界</span>
				</div>
				<div class="xingxi">
					<ul class="overContrl">
						<li>
							<span>2</span>
							<p>购物车</p>
						</li>
						<li>
							<span>2</span>
							<p>交易记录</p>
						</li>
					</ul>
				</div>
			</div>
			<div class="mui-content-main">
				<div class="record">
					<span class="mui-pull-left">我的订单</span>
					<span class="mui-pull-right">
						<p class="mui-icon mui-icon-forward mui-pull-right " style="font-size: 18px;"></p>
						<p class="mui-pull-right">全部订单</p>
					</span>
				</div>
				<div class="record-m">
					<ul class="overContrl">
						<li>
							<span class="mui-icon-extra mui-icon-extra-card"></span>
							<p>待付款</p>
						</li>
						<li>
							<span class="mui-icon-extra mui-icon-extra-cart"></span>
							<p>待发货</p>
						</li>
						<li>
							<span class="mui-icon-extra mui-icon-extra-express"></span>
							<p>已收货</p>
						</li>
					</ul>
				</div>
				<div class="record-f">
					<ul class="overContrl">
						<li>
							<span>0.0</span>
							<p>余额</p>
						</li>
						<li>
							<span>0</span>
							<p>积分</p>
						</li>
						<li>
							<span>0</span>
							<p>金珠</p>
						</li>
						<li style="border-left:1px solid #E6E6E6 ;margin-top: -1px;">
							<span class="mui-icon-extra mui-icon-extra-gold"style="font-size:20px"></span>
							<p style="margin-bottom:0;">我的钱包</p>
						</li>
					</ul>
				</div>
			</div>
			<div class="mui-content-main" style="padding-top: 0;margin-bottom: 10px;">
				<ul class="list">
					<li class="mui-table-view-cell" id="bankcard">
						<a class="mui-navigate-right">
							<span class="mui-icon-extra mui-icon-extra-card"></span><span class="title">银行卡</span>
						</a>
					</li>
					<li class="mui-table-view-cell">
						<a class="mui-navigate-right" style="display: flex;align-items:center;" id="address">
							<span class="mui-icon mui-icon-location"></span> 
							<span class="title" >收货地址管理</span>
						</a>
					</li>
					<li class="mui-table-view-cell" style="display: flex;justify-content:space-between;"  id="phoneline">
						<div class="" style="display: flex;align-items:center;">
							<span class="mui-icon-extra mui-icon-extra-custom"></span>
							<span class="title" >联系客服</span>
						</div>	
						<p class="mui-pull-right">88888888</p>
					</li>
				</ul>
			</div>
		  </div>
		</div>  
		<div class="mui-off-canvas-backdrop"></div>
	  </div>
	<script type="text/javascript">
	
	(function($, doc) {
		$.init({
			pullRefresh: {
				container: '#pullrefresh',
				down: { //下拉刷新
					callback: pulldownRefresh,
					style: $.os.android ? "circle" : "default"
				}
			}
		});
		
		function pulldownRefresh() {	
			loadData();
			appPage.endPullRefresh();
		}
		
		$.plusReady(function() {		
			var settingButton = doc.getElementById("setting");
			var addressButton = doc.getElementById("address");		
			var phonelineButton = doc.getElementById("phoneline");
			var bankcardButton = doc.getElementById("bankcard");
			var inviteButton = doc.getElementById("invite");

			// 去推广注册页面
			var invite = plus.webview.getWebviewById("invite");
			var invite_loaded_flag = false;
			if(!invite){
				invite = $.preload({
					"id": 'invite',
					"url": 'invite.html'
				});
			}else{
				invite_loaded_flag = true;
			}
			
			invite.addEventListener("loaded",function () {
				invite_loaded_flag = true;
			});
			var toInvite = function() {
				//使用定时器的原因：
				//可能执行太快，main页面loaded事件尚未触发就执行自定义事件，此时必然会失败
				var id = setInterval(function () {
					if(invite_loaded_flag){
						clearInterval(id);
						$.fire(invite, 'show', null);
						invite.show("pop-in");
					}
				},20);
			};
			
			
			
			inviteButton.addEventListener('tap',function(even){
				toInvite();
			})
			
			phonelineButton.addEventListener('tap',function(even){
				plus.device.dial('88888888', true);
			})
			
			settingButton.addEventListener('tap',function(even){
				loginRequired(function(){
					openView('setting.html', 'setting');
				})
			})
			
			addressButton.addEventListener('tap',function(even){
				loginRequired(function(){
					beforeOpenView("address.html");
				})
			})
			bankcardButton.addEventListener('tap',function(even){
				loginRequired(function(){
					beforeOpenView("bankcard.html");
				})
			})
			loadData();
			afterOpenView();
			
		})
		
		function loadData() {	
			console.log("1");
// 			var url = postUrl+"Home/member/assets.html";
// 			var postData = {};
// 			diyAjax(url,postData,function(result){
// 				console.log("获取财富信息");
// 				if(result.code == 1){
// 					
// 					var assetsjson = {};
// 					assetsjson.data = result.data.assets;
// 					render("#assets_warp", "assets_view", assetsjson);
// 				}
// 			},function(xhr){
// 				console.log("失败"+JSON.stringify(xhr));
// 			})		
		}
	}(mui, document))
	</script>
</body>
</html>