<!doctype html>
<html lang="en">
<head>
	<meta charset="UTF-8" />
	<title>商场</title>
	<meta name="viewport" content="width=device-width,initial-scale=1,minimum-scale=1,maximum-scale=1,user-scalable=no" />
	<link rel="stylesheet" href="css/mui.min.css"/>
	<link rel="stylesheet" href="css/app.css" />
	<link rel="stylesheet" href="css/shopcity.css" />
	<script type="text/javascript" src="js/jquery.min.js"></script>
	<script type="text/javascript" src="js/mui.min.js"></script>
	<script type="text/javascript" src="js/lib/artTemplate.js"></script>
	<script type="text/javascript" src="js/lib/common.js"></script>
	<script type="text/javascript" src="js/vue.min.js"></script>
	<script type="text/javascript" src="js/common.js"></script>
</head>
<body>
	<div class="mui-content mui-scroll-wrapper" id="pullrefresh" v-cloak>
		<header class="mui-bar mui-bar-nav">
			<div class="mui-input-row mui-search">
				<a class="mui-action-back mui-icon mui-icon-left-nav mui-pull-left" id="addaddress" onclick="goback()"></a>
				<h1 class="mui-title" style="right: 40px;left: 40px;">
					<input type="search" class="mui-input-clear" placeholder="搜索商品">
				</h1>
				<a class="mui-icon mui-icon-search mui-pull-right" onclick="goback()"></a>
			</div>
		</header>
		<div class="mui-slider mui-scroll" style="margin-top: 44px;">
			<div class="mui-slider-indicator mui-segmented-control mui-segmented-control-inverted" id="navbar">
				<a class="mui-control-item mui-active " href="#item1">现金商城</a>
				<a class="mui-control-item " href="#item2">积分商城</a>
				<a class="mui-control-item" href="#item3">金珠商城</a>
			</div>
			<div id="sliderProgressBar" class="mui-slider-progress-bar mui-col-xs-4"></div>
			<div class="mui-slider-group" id="contentbar">
				<div id="item1"  class="contentbarson mui-slider-item mui-control-content " >
					<div class="mui-table-view">
						<div id="slider" class="mui-slider banner" >
						  <div class="mui-slider-group mui-slider-loop">
							<!-- 额外增加的一个节点(循环轮播：第一个节点是最后一张轮播) -->
							<div class="mui-slider-item mui-slider-item-duplicate">
							  <a href="#">
								<img src="http:\/\/placehold.it\/340x110">
							  </a>
							</div>
							<!-- 第一张 -->
							<div class="mui-slider-item">
							  <a href="#">
								<img src="http:\/\/placehold.it\/340x110">
							  </a>
							</div>
							<!-- 第二张 -->
							<div class="mui-slider-item">
							  <a href="#">
								<img src="http:\/\/placehold.it\/340x110">
							  </a>
							</div>
							<!-- 第三张 -->
							<div class="mui-slider-item">
							  <a href="#">
								<img src="http:\/\/placehold.it\/340x110">
							  </a>
							</div>
							<!-- 第四张 -->
							<div class="mui-slider-item">
							  <a href="#">
								<img src="http:\/\/placehold.it\/340x110">
							  </a>
							</div>
							<!-- 额外增加的一个节点(循环轮播：最后一个节点是第一张轮播) -->
							<div class="mui-slider-item mui-slider-item-duplicate">
							  <a href="#">
								<img src="http:\/\/placehold.it\/340x110">
							  </a>
							</div>
						  </div>
						  <div class="mui-slider-indicator">
							<div class="mui-indicator mui-active"></div>
							<div class="mui-indicator"></div>
							<div class="mui-indicator"></div>
							<div class="mui-indicator"></div>
						  </div>
						</div>
						<div class="fastnav">
						  <ul>
						  	<li>
								<img src="picture/01.png" >
								<p><span>方便素食</span></p>
							</li>
							<li>
								<img src="picture/01.png" >
								<p><span>方便素食</span></p>
							</li>
							<li>
								<img src="picture/01.png" >
								<p><span>方便素食</span></p>
							</li>
							<li>
								<img src="picture/01.png" >
								<p><span>方便素食</span></p>
							</li>
							<li>
								<img src="picture/01.png" >
								<p><span>方便素食</span></p>
							</li>
						  </ul>
						</div>
						<div class="ad">
							<img src="picture/02.png" >
						</div>
						<div class="p-list">
							<ul>
								<li v-for="good in goods">
									<div class="p-content">
										<div><img :src="good.img"></div>
										<div class="p-content-title">
											<span>{{good.name}}</span>
										</div>
										<div class="p-content-price">
											<span class="pull-l">￥{{good.price}}</span>
											<span class="pull-r"><button type="button" class="mui-btn mui-btn-danger mui-btn-outlined">购买</button></span>
										</div>
									</div>
								</li>
							</ul>
						</div>
					</div>
				</div>
				<div id="item2"  class="contentbarson mui-slider-item mui-control-content  " >
					<div class="mui-table-view">
						暂无数据
					</div>
				</div>
				<div id="item3"  class="contentbarson mui-slider-item mui-control-content">
					<div class="mui-table-view">
						暂无数据
					</div>
				</div>
			</div>
		</div>
	</div>
	<script type="text/javascript">
		(function($, doc) {
				var app = new Vue({
				    el: '#pullrefresh',
				    data: function() {
				        return {
							banner: [],
							goods:[
								
							],
				        }
				    },
				    mounted: function(){
				        this._init();
				    },
				    methods: {
				        _init: function(){
							var that = this;
							var gallery = mui('.banner');
								gallery.slider({
								  interval:5000//自动轮播周期，若为0则不自动播放，默认为0；
								});
							$.plusReady(function() {	
								var self = plus.webview.currentWebview();
								console.log(self.pageid);
								
								var demo= document.getElementById("navbar").getElementsByTagName("a");
								var demo2= document.getElementsByClassName("contentbarson");
								for(var i=0;i<demo.length;i++){
									demo[i].classList.remove("mui-active");
									demo2[i].classList.remove("mui-active");
									var hrefid=demo[i].getAttribute("href");
									var hrefid2="#"+demo2[i].getAttribute("id");
									if(hrefid==self.pageid){
										demo[i].classList.add("mui-active");
										demo2[i].classList.add("mui-active");
									}
									
									
								 }
								 
								that.loadData();
								
								afterOpenView();
							})
				        },
						pulldownRefresh: function(){
							appPage.endPullRefresh();
						},
						loadData:function(){
							var url = postUrl+"Home/member/user.html";
							var postData = {};
							var result = {
								data:{
									banner:[{img:"",url:""},{img:"",url:""},{img:"",url:""}],
									aaa:[{img:"",url:"",text:""},{img:"",url:"",text:""},{img:"",url:"",text:""}],
									ad:{img:"",url:""},
									goods:[
										{id:"109",img:"http://api.tongwujie.cn/public/uploads/20190618/41b7c9fdd3d5d6d700df653feebc3c73.png",name:"是德菲拉萨的飞机",price:"100"},
										{id:"109",img:"http://api.tongwujie.cn/public/uploads/20190618/41b7c9fdd3d5d6d700df653feebc3c73.png",name:"是德菲拉萨的飞机",price:"100"},
										{id:"109",img:"http://api.tongwujie.cn/public/uploads/20190618/41b7c9fdd3d5d6d700df653feebc3c73.png",name:"是德菲拉萨的飞机",price:"100"},
										{id:"109",img:"http://api.tongwujie.cn/public/uploads/20190618/41b7c9fdd3d5d6d700df653feebc3c73.png",name:"是德菲拉萨的飞机",price:"100"},
										{id:"109",img:"http://api.tongwujie.cn/public/uploads/20190618/41b7c9fdd3d5d6d700df653feebc3c73.png",name:"是德菲拉萨的飞机",price:"100"},
										{id:"109",img:"http://api.tongwujie.cn/public/uploads/20190618/41b7c9fdd3d5d6d700df653feebc3c73.png",name:"是德菲拉萨的飞机",price:"100"},
									]
								}
							};
							
							this.goods=result['data']['goods'];
// 							diyAjax(url,postData,function(result){
// 								console.log("获取用户中心信息");
// 								if(result.code == 1){
// 									log(result.data.userinfo);
// 									var userinfojson = {};
// 									userinfojson.data = result.data.userinfo;
// 									render("#diva_wrap", "diva_view", userinfojson);
// 									render("#divb_wrap", "divb_view", userinfojson);
// 									render("#divc_wrap", "divc_view", userinfojson);
// 									
// 									$("body").on("tap", "#phoneline", function() {
// 										var tel= userinfojson['data']['hotline'];
// 										plus.device.dial(tel, true);
// 									})
// 								}
// 							},function(xhr){
// 								console.log("失败"+JSON.stringify(xhr));
// 							})	
						}
				    }
				});
				
				$.init({
					pullRefresh: {
						container: '#pullrefresh',
						down: { //下拉刷新
							callback: app.pulldownRefresh,
							style: $.os.android ? "circle" : "default"
						}
					}
				});
				
				
			}(mui, document))
	</script>
</body>
</html>